# ğŸš€ è‡ªåŠ¨å‘å¸ƒå·¥ä½œæµä½¿ç”¨æŒ‡å—

æœ¬é¡¹ç›®é…ç½®äº†å®Œæ•´çš„è‡ªåŠ¨å‘å¸ƒå·¥ä½œæµï¼Œå½“æ‚¨åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ„å»ºã€æ‰“åŒ…å¹¶å‘å¸ƒåˆ°GitHub Releaseå’ŒWebDAVæœåŠ¡å™¨ã€‚

## ğŸ“‹ å·¥ä½œæµåŠŸèƒ½

### âœ¨ ä¸»è¦ç‰¹æ€§
- **ğŸ·ï¸ æ ‡ç­¾è§¦å‘** - æ¨é€ç‰ˆæœ¬æ ‡ç­¾æ—¶è‡ªåŠ¨æ‰§è¡Œ
- **ğŸ“¦ æ™ºèƒ½æ‰“åŒ…** - ç”Ÿæˆå®Œæ•´ç‰ˆå’Œæºç ç‰ˆä¸¤ä¸ªå‘å¸ƒåŒ…
- **ğŸ¯ GitHub Release** - è‡ªåŠ¨åˆ›å»ºReleaseå¹¶ä¸Šä¼ æ–‡ä»¶
- **ğŸŒ WebDAVåŒæ­¥** - åŒæ—¶ä¸Šä¼ åˆ°WebDAVæœåŠ¡å™¨
- **ğŸ“ å˜æ›´æ—¥å¿—** - è‡ªåŠ¨æå–CHANGELOG.mdä¸­çš„ç‰ˆæœ¬è¯´æ˜
- **ğŸ”— ç‰ˆæœ¬ç®¡ç†** - ç»´æŠ¤æœ€æ–°ç‰ˆæœ¬é“¾æ¥

### ğŸ“¦ å‘å¸ƒåŒ…ç±»å‹
1. **å®Œæ•´ç‰ˆæœ¬** (`danmu2rcon-X.X.X-full.zip`)
   - åŒ…å«æ‰€æœ‰ä¾èµ–ï¼ˆnode_modulesï¼‰
   - ä¸‹è½½å³ç”¨ï¼Œæ— éœ€é¢å¤–å®‰è£…
   - é€‚åˆæœ€ç»ˆç”¨æˆ·

2. **æºç ç‰ˆæœ¬** (`danmu2rcon-X.X.X-source.zip`)
   - ä»…åŒ…å«æºä»£ç 
   - éœ€è¦è¿è¡Œ `npm install`
   - é€‚åˆå¼€å‘è€…

## ğŸ› ï¸ é…ç½®è¦æ±‚

### GitHub Secretsè®¾ç½®
åœ¨GitHubä»“åº“çš„ **Settings > Secrets and variables > Actions** ä¸­æ·»åŠ ï¼š

```bash
# WebDAVæœåŠ¡å™¨é…ç½®ï¼ˆå¿…éœ€ï¼‰
WEBDAV_URL=https://your-webdav-server.com/dav
WEBDAV_USERNAME=your_username
WEBDAV_PASSWORD=your_password
```

### æƒé™è®¾ç½®
ç¡®ä¿GitHub Actionså…·æœ‰ä»¥ä¸‹æƒé™ï¼š
- **Contents**: Writeï¼ˆåˆ›å»ºReleaseï¼‰
- **Actions**: Writeï¼ˆè¿è¡Œå·¥ä½œæµï¼‰

## ğŸ·ï¸ å‘å¸ƒæ–°ç‰ˆæœ¬

### 1. å‡†å¤‡å‘å¸ƒ
åœ¨å‘å¸ƒå‰ç¡®ä¿ï¼š
- [ ] ä»£ç å·²æµ‹è¯•æ— è¯¯
- [ ] æ›´æ–°äº†`CHANGELOG.md`ä¸­çš„ç‰ˆæœ¬ä¿¡æ¯
- [ ] æ›´æ–°äº†`package.json`ä¸­çš„ç‰ˆæœ¬å·ï¼ˆå¯é€‰ï¼‰

### 2. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
```bash
# 1. ç¡®ä¿åœ¨mainåˆ†æ”¯
git checkout main
git pull origin main

# 2. åˆ›å»ºå¹¶æ¨é€æ ‡ç­¾
git tag v1.0.0
git push origin v1.0.0

# æˆ–è€…ä¸€æ¬¡æ€§åˆ›å»ºå¸¦æ³¨é‡Šçš„æ ‡ç­¾
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0
```

### 3. ç›‘æ§å‘å¸ƒè¿‡ç¨‹
1. è®¿é—®GitHubä»“åº“çš„ **Actions** é¡µé¢
2. æŸ¥çœ‹"ğŸš€ è‡ªåŠ¨å‘å¸ƒç‰ˆæœ¬"å·¥ä½œæµçŠ¶æ€
3. ç­‰å¾…å·¥ä½œæµå®Œæˆï¼ˆé€šå¸¸éœ€è¦3-5åˆ†é’Ÿï¼‰

## ğŸ“ WebDAVç›®å½•ç»“æ„

å·¥ä½œæµä¼šåœ¨WebDAVæœåŠ¡å™¨åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
webdav-root/
â””â”€â”€ danmu2rcon/
    â”œâ”€â”€ danmu2rcon-latest.zip          # æœ€æ–°ç‰ˆæœ¬ï¼ˆå¿«é€Ÿä¸‹è½½ï¼‰
    â”œâ”€â”€ latest-version.json            # æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯
    â””â”€â”€ releases/
        â”œâ”€â”€ v1.0.0/
        â”‚   â”œâ”€â”€ danmu2rcon-1.0.0-full.zip
        â”‚   â”œâ”€â”€ danmu2rcon-1.0.0-source.zip
        â”‚   â””â”€â”€ version-info.json
        â”œâ”€â”€ v1.0.1/
        â”‚   â”œâ”€â”€ danmu2rcon-1.0.1-full.zip
        â”‚   â”œâ”€â”€ danmu2rcon-1.0.1-source.zip
        â”‚   â””â”€â”€ version-info.json
        â””â”€â”€ ...
```

## ğŸ“ å˜æ›´æ—¥å¿—æ ¼å¼

ä¸ºäº†è®©å·¥ä½œæµæ­£ç¡®æå–å˜æ›´ä¿¡æ¯ï¼Œè¯·åœ¨`CHANGELOG.md`ä¸­ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼š

```markdown
# å˜æ›´æ—¥å¿—

## [1.0.1] - 2024-01-15

### æ–°å¢
- æ–°åŠŸèƒ½A
- æ–°åŠŸèƒ½B

### ä¿®å¤
- ä¿®å¤é—®é¢˜A
- ä¿®å¤é—®é¢˜B

### ä¼˜åŒ–
- ä¼˜åŒ–æ€§èƒ½
- æ”¹è¿›UI

## [1.0.0] - 2024-01-01

### æ–°å¢
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€åŠŸèƒ½å®ç°
```

## ğŸ”§ å·¥ä½œæµè‡ªå®šä¹‰

### ä¿®æ”¹è§¦å‘æ¡ä»¶
åœ¨`.github/workflows/release.yml`ä¸­ä¿®æ”¹ï¼š

```yaml
on:
  push:
    tags:
      - 'v*.*.*'      # æ ‡å‡†è¯­ä¹‰ç‰ˆæœ¬
      - 'v*.*.*-*'    # é¢„å‘å¸ƒç‰ˆæœ¬
      - 'release-*'   # è‡ªå®šä¹‰æ ¼å¼
```

### ä¿®æ”¹æ‰“åŒ…å†…å®¹
åœ¨"åˆ›å»ºå‘å¸ƒåŒ…"æ­¥éª¤ä¸­ä¿®æ”¹å¤åˆ¶çš„æ–‡ä»¶ï¼š

```bash
# æ·»åŠ æ–°æ–‡ä»¶
cp new-file.txt release-temp/danmu2rcon-${{ steps.version.outputs.clean_version }}/

# æ’é™¤æŸäº›æ–‡ä»¶
rm -f release-temp/danmu2rcon-${{ steps.version.outputs.clean_version }}/unwanted-file.txt
```

### ä¿®æ”¹WebDAVè·¯å¾„
ä¿®æ”¹WebDAVç›®å½•ç»“æ„ï¼š

```bash
# è‡ªå®šä¹‰è·¯å¾„
WEBDAV_DIR="custom-path/releases/${{ steps.version.outputs.version }}"
```

## ğŸ›¡ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

### WebDAVè®¤è¯
- **æ°¸è¿œä¸è¦**åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†ç 
- ä½¿ç”¨GitHub Secretså­˜å‚¨æ•æ„Ÿä¿¡æ¯
- å®šæœŸæ›´æ–°WebDAVå¯†ç 

### æ–‡ä»¶æƒé™
- ç¡®ä¿WebDAVæœåŠ¡å™¨æœ‰é€‚å½“çš„æƒé™æ§åˆ¶
- è€ƒè™‘ä½¿ç”¨HTTPSåè®®
- å®šæœŸå¤‡ä»½å‘å¸ƒæ–‡ä»¶

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: å·¥ä½œæµè§¦å‘å¤±è´¥**
```bash
# æ£€æŸ¥æ ‡ç­¾æ ¼å¼
git tag --list | grep v1.0.0

# ç¡®ä¿æ ‡ç­¾å·²æ¨é€
git ls-remote --tags origin
```

**A: ç¡®ä¿æ ‡ç­¾æ ¼å¼ç¬¦åˆ`v*.*.*`æ¨¡å¼**

**Q: WebDAVä¸Šä¼ å¤±è´¥**
- æ£€æŸ¥WebDAV URLæ˜¯å¦æ­£ç¡®
- éªŒè¯ç”¨æˆ·åå’Œå¯†ç 
- ç¡®è®¤æœåŠ¡å™¨æ”¯æŒWebDAVåè®®

**Q: Releaseåˆ›å»ºå¤±è´¥**
- æ£€æŸ¥GITHUB_TOKENæƒé™
- ç¡®è®¤ä»“åº“è®¾ç½®å…è®¸Actionsåˆ›å»ºRelease

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹å·¥ä½œæµæ—¥å¿—**
   - è®¿é—®Actionsé¡µé¢æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   - å…³æ³¨é”™è¯¯æ­¥éª¤çš„è¾“å‡º

2. **æœ¬åœ°æµ‹è¯•æ‰“åŒ…**
   ```bash
   # æ¨¡æ‹Ÿæ‰“åŒ…è¿‡ç¨‹
   mkdir -p release-temp/test
   cp *.js *.json *.md release-temp/test/
   cd release-temp && zip -r ../test.zip test/
   ```

3. **æµ‹è¯•WebDAVè¿æ¥**
   ```bash
   # ä½¿ç”¨curlæµ‹è¯•è¿æ¥
   curl -u "username:password" https://your-webdav-server.com/dav/
   ```

## ğŸ¯ æœ€ä½³å®è·µ

### ç‰ˆæœ¬ç®¡ç†
- ä½¿ç”¨[è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶](https://semver.org/lang/zh-CN/)
- ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼ˆå¦‚ï¼š1.2.3ï¼‰
- é¢„å‘å¸ƒç‰ˆæœ¬æ·»åŠ åç¼€ï¼ˆå¦‚ï¼š1.2.3-beta.1ï¼‰

### å‘å¸ƒæµç¨‹
1. åœ¨å¼€å‘åˆ†æ”¯å®ŒæˆåŠŸèƒ½
2. åˆå¹¶åˆ°mainåˆ†æ”¯
3. æ›´æ–°CHANGELOG.md
4. åˆ›å»ºå¹¶æ¨é€æ ‡ç­¾
5. éªŒè¯è‡ªåŠ¨å‘å¸ƒç»“æœ

### è´¨é‡ä¿è¯
- å‘å¸ƒå‰è¿›è¡Œå……åˆ†æµ‹è¯•
- ä¿æŒCHANGELOG.mdçš„æ›´æ–°
- å®šæœŸæ¸…ç†æ—§ç‰ˆæœ¬ï¼ˆå¦‚éœ€è¦ï¼‰

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è‡ªåŠ¨å‘å¸ƒå·¥ä½œæµæ—¶é‡åˆ°é—®é¢˜ï¼š

1. ğŸ“š æŸ¥çœ‹GitHub Actionsæ—¥å¿—
2. ğŸ” æ£€æŸ¥æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
3. ğŸ“§ è”ç³»ç»´æŠ¤è€…ï¼šWittF@qq.com
4. ğŸ› æäº¤Issueï¼š[GitHub Issues](https://github.com/WittF/danmu2rcon/issues)

---

âœ¨ **ç¥æ‚¨å‘å¸ƒæ„‰å¿«ï¼** ğŸš€ 